# Nginx Backup & Restore Scripts

This toolset contains two scripts for backing up and restoring Nginx installations, configurations, modules, static files, and dependencies on Linux systems.

---

## üìÇ Scripts Included

- `backup-nginx.sh`: Backup Nginx and related files  
- `restore-nginx.sh`: Restore Nginx from a backup file  

---

## ‚ú® Features

- Auto-generated filenames with hostname and version  
- Supports custom output paths and directory exclusions  
- Safe restore with process checks  
- Optional auto-start after restore  

---

## üì¶ `backup-nginx.sh`

### Usage

```bash
Usage: ./backup-nginx.sh [options]

Options:
  --output <file>     Specify output tar.gz file (default: /root/<auto-generated>)
  --exclude <path>    Exclude a directory from backup (can be used multiple times)
  --help              Show this help message
```

### Examples

```bash
./backup-nginx.sh
# Backup with default name to /root/

./backup-nginx.sh --output /tmp/mybackup.tar.gz
# Backup to a custom location

./backup-nginx.sh --exclude /data/static
# Exclude one directory

./backup-nginx.sh --exclude /data/static --exclude /cache
# Exclude multiple directories
```

![image-20250429143759287](https://p.ipic.vip/w7gdag.png)

------

## üîÅ `restore-nginx.sh`

### Usage

```bash
Usage: ./restore-nginx.sh [OPTIONS] [BACKUP_TAR]

Restore Nginx, modules, configuration, static files, and dependencies.

Options:
  --no-clean           Skip cleanup of old installation (cleanup is default)
  --no-start           Do not start Nginx after restoring
  --exclude <dir>      Exclude directory from restoration (can be used multiple times)
  --backup-file <path> Explicitly specify the backup tar file
  --help               Show this help message
```

üìå **Note:** If neither `BACKUP_TAR` nor `--backup-file` is provided, the script will prompt for it.

### Examples

```bash
./restore-nginx.sh /root/nginx-backup.tar.gz
# Restore from a file

./restore-nginx.sh --backup-file /root/nginx.tar.gz --exclude static --no-start --no-clean
# Full custom restore
```

![image-20250429143703359](https://p.ipic.vip/c7kjac.png)

------

## üîê Safety Notes

- Ensure **no Nginx service or process is running** before restoration.
- The restore process will **overwrite** critical paths like `/etc/nginx`, `/usr/lib64/nginx`, `/data/static`.
- Recommended: test in staging before production use.

